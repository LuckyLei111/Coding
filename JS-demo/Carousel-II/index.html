<!DOCTYPE html>
<html lang="zh">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<meta http-equiv="X-UA-Compatible" content="ie=edge" />
	<title>Document</title>
	<link rel="stylesheet" href="//at.alicdn.com/t/font_454054_43rmn30qbqhbyb9.css" />
	<link rel="stylesheet" href="css/index.css" />
	<link rel="stylesheet" href="css/media.css" />
	<script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
</head>
<body>
	<header>
		<div class="head clearfix">
			<div class="logo fl">
				<a href="/">logo</a>
			</div>
			<ul class="nav fl">
				<li><a href="/">栏目一</a></li>
				<li><a href="/">栏目二</a></li>
				<li><a href="/">栏目三</a></li>
				<li><a href="/">栏目四</a></li>
				<li><a href="/">栏目五</a></li>
			</ul>
			<div class="m-menu fr">
				<i class="iconfont icon-gengduo"></i>
			</div>
		</div>
	</header>
	<div class="con-sh">
		<ul class="m-con">
			<li class="item item1" id="op1"><p>一</p></li>
			<li class="item item2" id="op2"><p>二</p></li>
			<li class="item item3" id="op3"><p>三</p></li>
			<li class="item item4" id="op4"><p>四</p></li>
		</ul>
	</div>
	<div class="progressbar"></div>
	<script>
		//滑动的次数
		var rate = 0;
		//滑动的方向
		var dire = false;
		//定义计时器对象
		var timer
		//获取到ul元素
		var mCon = document.querySelector('.m-con');
		//获取到li元素
		var mLi = mCon.getElementsByTagName('li');
		//获取到进度条
		var proObj = document.querySelector('.progressbar');
		runTimes();
		function runTimes(){
			times = setInterval(function(){
				proi[rate].style.background = 'none';
				if (dire == false) {
					rate++;
					mCon.style.transform = "translate(0," + -100 * rate + "%)";
					proi[rate].style.background = '#fff';
					if(rate >= mLi.length - 1){
						rate = mLi.length -1;
						dire = true;
					}
				}else{
					rate--;
					mCon.style.transform = "translate(0," + -100 * rate + "%)";
					proi[rate].style.background = '#fff';
					if (rate <= 0) {
						rate = 0;
						dire = false;
					}
				}
			},2500);
		}
		for (var i =0;i<mLi.length;i++){
			var op = document.createElement("i");
			op.classList.add('item-int');
			proObj.appendChild(op);
		}
		
		var proi = proObj.getElementsByTagName('i');
		proi[rate].style.background = '#fff';
		for(var a = 0;a<proi.length;a++){
			(function(a){
				
				proi[a].onclick = function(){
					
					clearInterval(times);
					
					for(var b = 0;b < proi.length;b++){
						proi[b].style.background = 'none';
					}
					proi[a].style.background = "#fff";
					if(a == 3){
						dire = true;
					}
					if(a == 0){
						dire = false;
					}
					
					rate = a;
					
					console.log(rate);
					
					mCon.style.transform = "translate(0," + -100 * a + "%)";
					
					runTimes();
				}
			})(a);
		}
	</script>
</body>
</html>