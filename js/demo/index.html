<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>js_demo_test</title>
</head>
<body>
    <div id="app" class="box box1">
        <ul>
            <li>hello</li>
            <li>world</li>
            <li>javascript</li>
        </ul>
    </div>
    <div class="photo">
        <ul class="ct">
            <li data-img="http://img.yelei.me/images/img_01.jpg">鼠标放置查看图片1</li>
            <li data-img="http://img.yelei.me/images/img_02.jpg">鼠标放置查看图片2</li>
            <li data-img="http://img.yelei.me/images/img_03.jpg">鼠标放置查看图片3</li>
        </ul>
        <div class="img-preview"></div>
    </div>
    <div class="liText">
        <ul class="ulText">
            <li>hello</li>
            <li>world</li>
        </ul>
    </div>
    <input id="btnClick" type="button" value="Click Here" />
    <script>
        // function fn1() {
        //     console.log('fn1执行！')
        // }
        // function fn2() {
        //     console.log('fn2执行！')
        // }
        // fn1();
        // fn2();
        // 如果fn1是异步操作，fn2是立即执行，不会等fn1结束在执行。 这时可以考虑改写fn1，把fn2写成fn1的回调函数
        // function fn1(callback) {
        //     console.log('fn1执行！')
        //     setTimeout(function(){
        //         console.log('异步操作')
        //     },2000)
        //     callback();
        // }
        // function fn2() {
        //     console.log('fn2执行！')
        // }
        // fn1(fn2);
        // 函数截流
        // function throttle(fn, delay){
        //     var timer = null;
        //     return function() {
        //         clearTimeout(timer)
        //         timer = setTimeout(function(){
        //             fn(arguments)
        //         }, delay)
        //     }
        // }
        // function fn(){
        //     console.log('hello')
        // }
        // var fn2 = throttle(fn, 1000)

        // 以下代码输出什么？
        // var a = 1;
        // setTimeout(function(){
        //     a = 2;
        //     console.log(a);
        // },0);
        // var a;
        // console.log(a);
        // a = 3;
        // console.log(a);
        // 1、3、2

        // 以下代码输出什么？
        // var flag = true;
        // setTimeout(function(){
        //     flag = false;
        // },0)
        // while(flag){}
        // console.log(flag);

        // 实现一个函数截流 
        // var timer
        // function hifrequency(){
        //     if(timer){
        //         clearTimeout(timer)
        //     }
        //     timer = setTimeout(function(){
        //         console.log('hello')
        //     },1000)
        // }

        // class操作
        // 获取class：classlist

        // 当鼠标放置在li元素上，会在img-preview里展示li的data-img对应的图片
        var liDoc = document.querySelectorAll('.ct>li');
        var imgPre = document.querySelector('.img-preview');
        var imgSrc = document.createElement('img')
        imgPre.appendChild(imgSrc);
        for(var i = 0;i<liDoc.length; i++){
            (function(i){
                liDoc[i].addEventListener('click', function(){
                    document.querySelector('.img-preview>img').src = liDoc[i].getAttribute('data-img')
                },false);
            })(i)
        }
        // 如下代码，当点击每一个元素li时控制台展示该元素的文本内容
        var liText = document.querySelectorAll('.ulText>li');
        for(var i = 0; i< liText.length; i++) {
            (function(i){
                liText[i].addEventListener('click', function(){
                    console.log(liText[i].innerText);
                },false)
            })(i)
        }

        // 写一个函数，批量操作css
        function setStyle(node, style){
            for(var atr in style) {
                node.style[atr] = style[atr]
            }
        }
        // setStyle(liDoc,{
        // 	'color': 'red',
        // 	'background-color': '#000'
        // })

        // DOM2 事件处理程序
        var btn = document.querySelector('#btnClick');
        // 移除事件
        // var handle = function(){
        //     console.log(this.id);
        // }
        // btnClick.addEventListener('click', handle, false)
        // btnClick.removeEventListener('click', handle, false)

        btn.onclick = function(e){
            console.log(e)
        }
        btn.addEventListener('click', function(e){
            console.log(this)
            console.log(btn)
            console.log(e.target)
        })

        // Ajax

        // 同步获取数据
        // var xhr = new XMLHttpRequest();
        // xhr.open('GET', './hello.json', false);
        // xhr.send();
        // var data = xhr.responseText;
        // console.log(data);

        // 异步获取代码
        // var xhr = new XMLHttpRequest();
        // xhr.open('GET', './hello.json', true)
        // xhr.send();
        // xhr.addEventListener('readystatechange', function(){
        //     console.log(xhr.readyState);
        // })
        // xhr.addEventListener('load', function(){
        //     console.log(xhr.status);
        //     if(xhr.status >= 200 && xhr.status < 300 || xhr.status === 304){
        //         var data = xhr.responseText;
        //         console.log(data);
        //     }else{
        //         console.log('error')
        //     }
        // },false)
        // xhr.onerror = function(){
        //     console.log('error')
        // }

    </script>
</body>
</html>